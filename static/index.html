<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Duplicate Bill Detector</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: linear-gradient(135deg, #dfe9f3 0%, #ffffff 100%);
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', sans-serif;
        }

        .card {
            width: 420px;
            border-radius: 18px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border: none;
            padding: 22px;
        }

        .title {
            font-weight: 700;
            color: #333;
        }

        .btn-custom {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            border: none;
            padding: 12px;
            color: white;
            font-size: 17px;
            font-weight: 600;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .btn-custom:hover {
            background: linear-gradient(135deg, #1e7e34, #28a745);
            transform: scale(1.02);
        }

        #result {
            font-size: 16px;
            font-weight: 600;
        }
    </style>
</head>
<body>

<div class="card">

    <h3 class="text-center title mb-3">ðŸ§¾ Duplicate Bill Detector</h3>
    <p class="text-center text-muted mb-4">Upload bill & detect duplicates instantly</p>

    <div class="mb-3">
        <label class="form-label fw-semibold">Amount</label>
        <input type="number" id="amount" class="form-control" placeholder="Enter amount">
    </div>

    <div class="mb-3">
        <label class="form-label fw-semibold">Date</label>
        <input type="date" id="date" class="form-control">
    </div>

    <div class="mb-3">
        <label class="form-label fw-semibold">Bill File</label>
        <input type="file" id="bill_file" class="form-control">
    </div>

    <button class="btn btn-custom w-100 mt-2" onclick="uploadBill()">Submit</button>

    <p id="result" class="text-center mt-3"></p>

</div>


<script>
function uploadBill() {

    let amountInput = document.getElementById("amount");
    let dateInput = document.getElementById("date");
    let fileInput = document.getElementById("bill_file");
    let result = document.getElementById("result");

    let amount = amountInput.value;
    let date = dateInput.value;
    let file = fileInput.files[0];

    if (!amount || !date || !file) {
        alert("Please fill all fields");
        return;
    }

    let formData = new FormData();
    formData.append("amount", amount);
    formData.append("date", date);
    formData.append("bill", file);

    fetch("http://127.0.0.1:5000/upload", {
        method: "POST",
        body: formData
    })
    .then(res => res.json())
    .then(data => {

        // Show message
        if (data.status === "success") {
            result.style.color = "green";
        } else if (data.status === "duplicate") {
            result.style.color = "red";
        }
        
        result.innerHTML = data.message;

        // ðŸš€ Always reset form after submit
        amountInput.value = "";
        dateInput.value = "";
        fileInput.value = "";
    });
}
</script>


</body>
</html>
